<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thi Sá»­ - Äá»‹a Lá»›p 4 - Äá» 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Nunito', sans-serif; }
        input[type="radio"] { width: 1.2rem; height: 1.2rem; margin-top: 0.15rem; flex-shrink: 0; }
    </style>
</head>
<body class="bg-yellow-50 py-8 min-h-screen">

    <div class="fixed top-4 right-4 bg-red-600 text-white font-bold py-2 px-4 rounded-full shadow-lg z-50 animate-pulse border-2 border-white">
        â³ <span id="dongHo">35:00</span>
    </div>

    <div class="max-w-4xl mx-auto bg-white p-6 md:p-8 rounded-lg shadow-xl relative z-10">
        <div class="text-center mb-8 border-b-4 border-yellow-500 pb-4">
            <h1 class="text-2xl md:text-3xl font-black text-yellow-700 uppercase">KIá»‚M TRA CUá»I Há»ŒC KÃŒ 1</h1>
            <p class="text-xl text-gray-600 font-bold mt-2">MÃ´n: Lá»ŠCH Sá»¬ & Äá»ŠA LÃ (Äá» sá»‘ 2)</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
            <div>
                <label class="block font-bold text-gray-700">Há» vÃ  tÃªn há»c sinh:</label>
                <input type="text" id="hoTen" class="w-full mt-1 p-2 border rounded focus:border-yellow-500 outline-none font-bold" placeholder="Nháº­p há» tÃªn Ä‘áº§y Ä‘á»§...">
            </div>
            <div>
                <label class="block font-bold text-gray-700">Lá»›p:</label>
                <input type="text" id="lop" class="w-full mt-1 p-2 border rounded focus:border-yellow-500 outline-none font-bold text-center" placeholder="VÃ­ dá»¥: 4A">
            </div>
        </div>

        <div class="space-y-6">
            
            <div class="bg-yellow-100 p-3 rounded font-bold text-yellow-800 uppercase">I. Pháº§n Tráº¯c Nghiá»‡m (7 Ä‘iá»ƒm)</div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 1 (1Ä‘): Äá»‹a danh nÃ o sau Ä‘Ã¢y lÃ  bÃ£i biá»ƒn ná»•i tiáº¿ng, thu hÃºt ráº¥t nhiá»u khÃ¡ch du lá»‹ch táº¡i tá»‰nh Thanh HÃ³a?</p>
                <div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau1" value="A"> <span>A. BÃ£i biá»ƒn Cá»­a LÃ².</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau1" value="B"> <span>B. BÃ£i biá»ƒn Sáº§m SÆ¡n.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau1" value="C"> <span>C. BÃ£i biá»ƒn Má»¹ KhÃª.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau1" value="D"> <span>D. BÃ£i biá»ƒn Nha Trang.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 2 (1Ä‘): Loáº¡i Ä‘áº¥t chÃ­nh, chiáº¿m diá»‡n tÃ­ch lá»›n nháº¥t á»Ÿ vÃ¹ng Äá»“ng báº±ng Báº¯c Bá»™ lÃ  gÃ¬?</p>
                <div class="mt-3 space-y-2">
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau2" value="A"> <span>A. Äáº¥t Ä‘á» ba-zan mÃ u má»¡.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau2" value="B"> <span>B. Äáº¥t phÃ¨n, Ä‘áº¥t máº·n.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau2" value="C"> <span>C. Äáº¥t phÃ¹ sa do sÃ´ng bá»“i Ä‘áº¯p.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau2" value="D"> <span>D. Äáº¥t cÃ¡t ven biá»ƒn.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 3 (1Ä‘): Vá»‹ anh hÃ¹ng dÃ¢n tá»™c nÃ o Ä‘Ã£ lÃ£nh Ä‘áº¡o cuá»™c khá»Ÿi nghÄ©a Lam SÆ¡n (táº¡i vÃ¹ng rá»«ng nÃºi Thanh HÃ³a) Ä‘Ã¡nh tháº¯ng giáº·c Minh?</p>
                <div class="mt-3 grid grid-cols-2 gap-3">
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau3" value="A"> <span>A. NgÃ´ Quyá»n.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau3" value="B"> <span>B. Äinh Bá»™ LÄ©nh.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau3" value="C"> <span>C. LÃª Lá»£i.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau3" value="D"> <span>D. Tráº§n HÆ°ng Äáº¡o.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 4 (1Ä‘): VÃ¹ng nÃ o cÃ³ máº­t Ä‘á»™ dÃ¢n sá»‘ cao nháº¥t (Ä‘Ã´ng dÃ¢n nháº¥t) á»Ÿ nÆ°á»›c ta hiá»‡n nay?</p>
                <div class="mt-3 space-y-2">
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau4" value="A"> <span>A. Trung du vÃ  miá»n nÃºi Báº¯c Bá»™.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau4" value="B"> <span>B. TÃ¢y NguyÃªn.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau4" value="C"> <span>C. Äá»“ng báº±ng Báº¯c Bá»™.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau4" value="D"> <span>D. Nam Bá»™.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 5 (1Ä‘): VÃ¹ng trung du (nÆ¡i chuyá»ƒn tiáº¿p giá»¯a miá»n nÃºi vÃ  Ä‘á»“ng báº±ng) á»Ÿ Báº¯c Bá»™ cÃ³ Ä‘áº·c Ä‘iá»ƒm Ä‘á»‹a hÃ¬nh nhÆ° tháº¿ nÃ o?</p>
                <div class="mt-3 space-y-2">
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau5" value="A"> <span>A. LÃ  vÃ¹ng nÃºi cao chÃ³t vÃ³t.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau5" value="B"> <span>B. LÃ  vÃ¹ng Ä‘á»“i cÃ³ Ä‘á»‰nh trÃ²n, sÆ°á»n thoáº£i (Ä‘á»“i bÃ¡t Ãºp).</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau5" value="C"> <span>C. LÃ  vÃ¹ng Ä‘á»“ng báº±ng pháº³ng lÃ¬.</span></label>
                    <label class="flex items-start space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau5" value="D"> <span>D. LÃ  vÃ¹ng trÅ©ng ngáº­p nÆ°á»›c quanh nÄƒm.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 6 (1Ä‘): CÃ´ng trÃ¬nh thá»§y Ä‘iá»‡n lá»›n nÃ o sau Ä‘Ã¢y náº±m trÃªn sÃ´ng ÄÃ , thuá»™c vÃ¹ng Trung du vÃ  miá»n nÃºi Báº¯c Bá»™?</p>
                <div class="mt-3 grid grid-cols-2 gap-3">
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau6" value="A"> <span>A. Thá»§y Ä‘iá»‡n HÃ²a BÃ¬nh.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau6" value="B"> <span>B. Thá»§y Ä‘iá»‡n Trá»‹ An.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau6" value="C"> <span>C. Thá»§y Ä‘iá»‡n Y-a-ly.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau6" value="D"> <span>D. Thá»§y Ä‘iá»‡n Cá»­a Äáº¡t.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 7 (0,5Ä‘): Lá»… há»™i Äá»n HÃ¹ng (PhÃº Thá») Ä‘Æ°á»£c tá»• chá»©c Ä‘á»ƒ tÆ°á»Ÿng nhá»› ai?</p>
                <div class="mt-3 grid grid-cols-1 md:grid-cols-2 gap-3">
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau7" value="A"> <span>A. CÃ¡c vua HÃ¹ng cÃ³ cÃ´ng dá»±ng nÆ°á»›c.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau7" value="B"> <span>B. Äá»©c ThÃ¡nh GiÃ³ng.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau7" value="C"> <span>C. CÃ¡c vá»‹ tá»• nghá» Ä‘Ãºc Ä‘á»“ng.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau7" value="D"> <span>D. Tháº§n nÃºi Táº£n ViÃªn.</span></label>
                </div>
            </div>

            <div class="bg-gray-50 p-4 rounded-lg border-l-4 border-yellow-500">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 8 (0,5Ä‘): Má»™t loáº¡i hÃ¬nh nghá»‡ thuáº­t sÃ¢n kháº¥u dÃ¢n gian Ä‘á»™c Ä‘Ã¡o, ra Ä‘á»i tá»« ná»n vÄƒn minh lÃºa nÆ°á»›c á»Ÿ Äá»“ng báº±ng Báº¯c Bá»™ lÃ :</p>
                <div class="mt-3 grid grid-cols-2 gap-3">
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau8" value="A"> <span>A. Cáº£i lÆ°Æ¡ng.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau8" value="B"> <span>B. Äá»n ca tÃ i tá»­.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau8" value="C"> <span>C. MÃºa rá»‘i nÆ°á»›c.</span></label>
                    <label class="flex items-center space-x-3 cursor-pointer hover:bg-white p-2 rounded"><input type="radio" name="cau8" value="D"> <span>D. Cá»“ng chiÃªng.</span></label>
                </div>
            </div>

            <div class="bg-blue-100 p-3 rounded font-bold text-blue-800 uppercase mt-8">II. Pháº§n Tá»± Luáº­n (3 Ä‘iá»ƒm)</div>

            <div class="bg-white p-4 rounded-lg border-l-4 border-blue-500 shadow-sm">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 9 (2Ä‘): HÃ£y mÃ´ táº£ má»™t mÃ³n Äƒn Ä‘áº·c sáº£n truyá»n thá»‘ng ná»•i tiáº¿ng cá»§a Thanh HoÃ¡ hoáº·c á»Ÿ Ä‘á»‹a phÆ°Æ¡ng em.</p>
                <textarea id="tu_luan_9" class="w-full mt-2 p-3 border-2 border-blue-200 rounded h-32 focus:border-blue-500 outline-none" placeholder="Con hÃ£y nháº­p cÃ¢u tráº£ lá»i vÃ o Ä‘Ã¢y..."></textarea>
            </div>

            <div class="bg-white p-4 rounded-lg border-l-4 border-blue-500 shadow-sm">
                <p class="font-bold text-lg text-gray-800">CÃ¢u 10: Em hÃ£y Ä‘á» xuáº¥t nhá»¯ng viá»‡c lÃ m cáº§n thiáº¿t Ä‘á»ƒ giá»¯ gÃ¬n, phÃ¡t huy giÃ¡ trá»‹ Di tÃ­ch lá»‹ch sá»­ Quá»‘c gia Äá»n BÃ  Triá»‡u:</p>
                <textarea id="tu_luan_10" class="w-full mt-2 p-3 border-2 border-blue-200 rounded h-32 focus:border-blue-500 outline-none" placeholder="Con hÃ£y nháº­p cÃ¢u tráº£ lá»i vÃ o Ä‘Ã¢y..."></textarea>
            </div>

        </div>

        <div class="text-center mt-10">
            <button onclick="nopBai()" class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-4 px-12 rounded-full shadow-lg text-xl transition transform hover:scale-105 animate-bounce">
                ğŸš€ Ná»˜P BÃ€I THI
            </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyA77lLi_JCLIdR535KEfg3S0_Ge2EorPMo", 
            authDomain: "baikiemtracuoiki.firebaseapp.com",
            projectId: "baikiemtracuoiki",
            storageBucket: "baikiemtracuoiki.appspot.com",
            messagingSenderId: "953819948776",
            appId: "1:953819948776:web:15848507d350f37c35e5d3"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const MON_HOC = "Lá»‹ch Sá»­ & Äá»‹a LÃ­";
        const MA_DE = "Äá» 2";
        const THOI_GIAN_LAM_BAI = 35; // PhÃºt

        // --- Äá»’NG Há»’ Äáº¾M NGÆ¯á»¢C ---
        let thoiGian = THOI_GIAN_LAM_BAI * 60;
        const dongHoDisplay = document.getElementById('dongHo');
        let daNopBai = false;

        const demNguoc = setInterval(() => {
            if (daNopBai) { clearInterval(demNguoc); return; }
            let phut = Math.floor(thoiGian / 60);
            let giay = thoiGian % 60;
            dongHoDisplay.innerText = `${phut < 10 ? '0'+phut : phut}:${giay < 10 ? '0'+giay : giay}`;
            thoiGian--;

            if (thoiGian < 0) {
                clearInterval(demNguoc);
                alert("â° ÄÃƒ Háº¾T GIá»œ! Há»‡ thá»‘ng sáº½ tá»± Ä‘á»™ng ná»™p bÃ i.");
                if(!document.getElementById('hoTen').value) document.getElementById('hoTen').value = "Háº¿t Giá» (QuÃªn TÃªn)";
                window.nopBai(true);
            }
        }, 1000);

        // --- HÃ€M CHáº¤M ÄIá»‚M ---
        function check(cau, dapAnDung, diem) {
            const luaChon = document.querySelector(`input[name="${cau}"]:checked`);
            return (luaChon && luaChon.value === dapAnDung) ? diem : 0;
        }

        window.nopBai = async function(isAuto = false) {
            if (daNopBai) return;
            
            const hoTen = document.getElementById('hoTen').value.trim();
            const lop = document.getElementById('lop').value.trim();

            if (!isAuto && (!hoTen || !lop)) { alert("Con chÆ°a Ä‘iá»n TÃªn hoáº·c Lá»›p!"); return; }

            daNopBai = true;
            const btn = document.querySelector('button');
            btn.innerText = "Äang cháº¥m Ä‘iá»ƒm..."; btn.disabled = true; btn.classList.add("bg-gray-500");

            // --- CHáº¤M ÄIá»‚M TRáº®C NGHIá»†M ---
            let diemTN = 0;
            diemTN += check("cau1", "B", 1.0); // Sáº§m SÆ¡n
            diemTN += check("cau2", "C", 1.0); // Äáº¥t phÃ¹ sa
            diemTN += check("cau3", "C", 1.0); // LÃª Lá»£i
            diemTN += check("cau4", "C", 1.0); // Äá»“ng báº±ng Báº¯c Bá»™
            diemTN += check("cau5", "B", 1.0); // Äá»“i bÃ¡t Ãºp
            diemTN += check("cau6", "A", 1.0); // HÃ²a BÃ¬nh
            diemTN += check("cau7", "A", 0.5); // Vua HÃ¹ng
            diemTN += check("cau8", "C", 0.5); // MÃºa rá»‘i nÆ°á»›c
            // Tá»•ng tráº¯c nghiá»‡m = 7.0 Ä‘iá»ƒm

            // Láº¥y ná»™i dung tá»± luáº­n
            const baiTuLuan = `
                [CÃ¢u 9]: ${document.getElementById('tu_luan_9').value}
                [CÃ¢u 10]: ${document.getElementById('tu_luan_10').value}
            `;

            try {
                await addDoc(collection(db, "Baikiemtracuoiki"), {
                    ho_ten: hoTen, lop: lop, mon_hoc: MON_HOC, ma_de: MA_DE,
                    diem_trac_nghiem: diemTN, 
                    diem_tu_luan: 0, // Tháº§y sáº½ cháº¥m tá»± luáº­n sau
                    bai_tu_luan: baiTuLuan,
                    nop_tu_dong: isAuto ? "CÃ³ (Háº¿t giá»)" : "KhÃ´ng",
                    thoi_gian_nop: new Date().toISOString()
                });
                alert(`Ná»™p bÃ i thÃ nh cÃ´ng!\nÄiá»ƒm tráº¯c nghiá»‡m mÃ¡y cháº¥m: ${diemTN}/7.0 Ä‘iá»ƒm.\nPháº§n tá»± luáº­n Tháº§y sáº½ cháº¥m sau.`);
                location.href = "../index.html";
            } catch (e) {
                alert("Lá»—i ná»™p bÃ i: " + e.message);
                btn.disabled = false; daNopBai = false;
            }
        }
    </script>
</body>
</html>
